extends ../layout

block content
  section.section.section-profile
    .section-inner.profile-layout
      .profile-sidebar(reveal)
        .profile-card
          .profile-avatar
            span.avatar-initial= (user && user.display_name ? user.display_name.charAt(0) : 'S')

          // Main name
          h2.profile-name= user && user.display_name ? user.display_name : (user && user.username ? user.username : 'Pixel Artist')

          // Handle from username if we have it
          if user && user.username
            p.profile-handle @#{user.username}
          else
            p.profile-handle @cyrus_artist

          // Short bio
          if user && user.bio
            p.profile-bio= user.bio
          else
            p.profile-bio Lover of collaborative pixel art, sunsets, and neon vibes.

          // === Account details from login ===
          if user
            .profile-details
              if user.username
                p
                  strong Username:
                  |  #{user.username}
              if user.email
                p
                  strong Email:
                  |  #{user.email}

          // Stats
          .profile-stats
            .profile-stat
              span.profile-stat-number= stats && stats.artwork_count ? stats.artwork_count : 0
              span.profile-stat-label Artworks
            .profile-stat
              span.profile-stat-number 5
              span.profile-stat-label Workspaces
            .profile-stat
              span.profile-stat-number 4.8â˜…
              span.profile-stat-label Rating

          // Actions
          a.btn.btn-outline.btn-full(href="/profile/edit") Edit Profile
          a.btn.btn-primary.btn-full(href="/logout") Logout

      .profile-main
        .profile-section
          h3.section-heading Recent Artworks
          .gallery-grid.gallery-grid-small
            if artworks && artworks.length
              each art in artworks
                .art-card(reveal)
                  a.art-thumb(href=`/gallery/${art.id}`)
                    if art.image_url
                      img(src=art.image_url, alt=art.title)
                    else
                      .art-placeholder #{art.title.charAt(0)}
                  .art-meta
                    h4.art-title= art.title
            else
              p.no-data No artworks yet. Go to the canvas and create one!
